(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[994],{81510:function(ve){ve.exports={loadingOff:"loadingOff___xwNDl",loadingOn:"loadingOn___3XTPu",selected:"selected___3_EQs",notSelected:"notSelected___e8YGs",tableRowLight:"tableRowLight___3v-o1",tableRowDark:"tableRowDark___1KdeK",cardImg:"cardImg___3VP_V",sender:"sender___2TWBw",subject:"subject___1uikb"}},15052:function(ve,We,t){"use strict";t.r(We),t.d(We,{default:function(){return It}});var Nt=t(57106),rt=t(99683),Vt=t(57338),Pe=t(25084),Pt=t(58024),V=t(39144),J=t(3182),j=t(2824),zt=t(24793),ge=t(97183),lt=t(94043),L=t.n(lt),u=t(67294),l=t(43581),P=t(11849),Bt=t(43358),ze=t(90290),Yt=t(59250),Be=t(13013),$t=t(30887),O=t(99210),Kt=t(22385),X=t(69713),Qt=t(54029),q=t(79166),Gt=t(18106),Ye=t(41046),Ut=t(402),$e=t(59289),Ke=t(57254),Qe=t(74498),ot=t(64302),Ge=t(81473),Ue=t(29148),Le=t(73171),Jt=t(12968),Je=t(62462),Xt=t(74379),_=t(38648),qt=t(57663),K=t(71577),_t=t(49111),ke=t(19650),en=t(20228),Oe=t(11382),tn=t(94233),dt=t(51890),Xe=t(22353),qe=t(44053),_e=t(15360),He=t(48965),Ie=t(25753),ct=t(51187),ut=t(34299),ft=t(81510),H=t.n(ft),ht=t(62022),me=t(17753),vt=t(37184),Ne=t.n(vt),e=t(85893),xe=$e.Z.Text,gt=function(a){var r=a.tabKey,v=a.id_company,o=a.state,f=a.activeTool,T=a.submitCounter,c=a.filter2,R=a.setSelectionList,C=a.selectionList,m=a.view,M=a.forceRender,F=a.setForceRender,I=a.setForceReloadTable,Y=a.forceReloadTable,y=a.selectedCompanyCounter,E=a.setSelectedCompanyCounter,Z=(0,u.useState)([]),w=(0,j.Z)(Z,2),p=w[0],$=w[1],A=(0,u.useState)(!1),D=(0,j.Z)(A,2),g=D[0],b=D[1],W=(0,u.useState)(!1),B=(0,j.Z)(W,2),le=B[0],N=B[1],Se=(0,u.useState)(!1),ye=(0,j.Z)(Se,2),oe=ye[0],ee=ye[1],pe=(0,u.useState)({}),Ze=(0,j.Z)(pe,2),we=Ze[0],te=Ze[1],de=(0,u.useState)(null),Te=(0,j.Z)(de,2),Re=Te[0],ne=Te[1],Ee=(0,u.useState)([]),be=(0,j.Z)(Ee,2),k=be[0],se=be[1],Fe=function(){var S=(0,J.Z)(L().mark(function s(i){var n;return L().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return b(!0),$([]),n=(0,P.Z)({id_company:v,state:o,current:i.current,pageSize:i.pageSize},c),x.next=5,(0,l.WY)(me.Q+"/api/mails/getpdf",{method:"POST",data:n}).then(function(h){$(h),console.log(h)}).catch(function(h){(0,Ie.S)(h,!1,"","")});case 5:b(!1);case 6:case"end":return x.stop()}},s)}));return function(i){return S.apply(this,arguments)}}(),ce=(0,u.useRef)(),ue=function(){ce.current.reload()};(0,u.useEffect)(function(){ue(),ce.current.reset()},[v,c]),(0,u.useEffect)(function(){ue(),I(!1)},[Y]);var ae=function(s,i,n){var d=C;if(d.some(function(h){return h.mails_id===s}))d=d.filter(function(h){return h.mails_id!==s});else{var x;d.push({mails_id:n==null?void 0:n.mails_id,title:n==null?void 0:n.sender,description:n==null?void 0:n.subject,avatar:(x=p[i])===null||x===void 0?void 0:x.image,state:n==null?void 0:n.state,task:n==null?void 0:n.task,id_company:v})}R(d),F(!M)},Q=function(s,i,n){var d=s;if(!d[i].seen){var x=y,h=x.mailCounterNotSeen;h[r]=h[r]-1,x.mailCounterNotSeen=h,d[i].seen=!0,se(d),E(x),F(!M)}te(n),ne(i),ee(!0)},fe=function(s,i){return(o==="RECIEVED"||o==="SCANNED")&&f!=="SELECT"?[(0,e.jsx)(ct.Z,{item:s,setData:se,data:k,index:i,setForceRender:F,forceRender:M})]:null},De={title:{render:function(s,i,n){return[(0,e.jsx)(e.Fragment,{children:window.innerWidth>930&&(0,e.jsx)(xe,{className:H().sender,strong:!0,onClick:function(){return Q(k,n,i)},children:i.sender})})]}},subTitle:{},type:{},description:{render:function(s,i,n){return[(0,e.jsx)(e.Fragment,{children:window.innerWidth>930&&(0,e.jsx)(xe,{className:H().subject,type:"secondary",onClick:function(){return Q(k,n,i)},children:i.sender})})]}},avatar:{render:function(s,i,n){var d,x,h;return[(0,e.jsxs)(ke.Z,{children:[window.innerWidth>930&&(0,e.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,e.jsx)("div",{style:{width:50},children:he(i,n)})}),!((d=k[n])!==null&&d!==void 0&&d.seen)&&(0,e.jsx)(q.Z.Ribbon,{placement:"start",text:"Neu",color:"green",style:{display:"block",left:-50}}),(0,e.jsx)(V.Z,{bodyStyle:{margin:0,padding:0,border:"none"},hoverable:!0,cover:(0,e.jsx)(Oe.Z,{spinning:g,children:(0,e.jsx)(dt.C,{src:g||((x=p[n])===null||x===void 0?void 0:x.name)!=="".concat(i.mails_id,"-").concat(i.opened_pic_is_saved?i.state:"RECIEVED",".pdf")?Ne():(h=p[n])===null||h===void 0?void 0:h.image,shape:"square",size:60,onClick:function(){return Q(k,n,i)}})})})]})]}},content:{render:function(s,i,n){return[(0,e.jsx)(e.Fragment,{children:window.innerWidth>930&&(0,e.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,e.jsx)("div",{style:{width:300},children:fe(i,n)})})}),(0,e.jsx)(e.Fragment,{children:window.innerWidth<930&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xe,{className:H().sender,strong:!0,onClick:function(){return Q(k,n,i)},children:i.sender}),(0,e.jsx)(xe,{type:"secondary",children:i.subject})]})})]},search:!1},actions:{render:function(s,i,n){return[(0,e.jsx)("div",{className:H().listContent,style:{color:"#CAC8CD"},children:(0,e.jsxs)("div",{className:H().listContentItem,children:[(0,e.jsxs)("span",{children:[(0,e.jsx)(l._H,{id:"start.item.recieved",defaultMessage:"Eingegangen am"}),","]}),(0,e.jsx)("p",{children:i.to_char}),(0,e.jsx)("br",{}),(0,e.jsx)(e.Fragment,{children:window.innerWidth<930&&(0,e.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,e.jsx)("div",{style:{width:200},children:fe(i,n)})})}),(0,e.jsx)(e.Fragment,{children:window.innerWidth<930&&(0,e.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,e.jsx)("div",{style:{width:50},children:he(i,n)})})})]})})]}}},he=function(s,i){if(f==="SELECT"){if((s.state==="RECIEVED"||s.state==="SCANNED")&&s.task==="done")return m?C.some(function(n){return n.mails_id===s.mails_id})?(0,e.jsx)(K.Z,{style:{width:"100%",textAlign:"left",backgroundColor:"#52C41A"},onClick:function(){ae(s.mails_id,i,s)},size:"large",children:(0,e.jsx)(Xe.Z,{style:{color:"white"}})}):(0,e.jsx)(K.Z,{type:"primary",style:{width:"100%",textAlign:"left"},onClick:function(){ae(s.mails_id,i,s)},size:"large",children:(0,e.jsx)(qe.Z,{})}):C.some(function(n){return n.mails_id===s.mails_id})?(0,e.jsx)(Xe.Z,{style:{fontSize:"17px",backgroundColor:"#52C41A",color:"white"},onClick:function(){ae(s.mails_id,i,s)}}):(0,e.jsx)(qe.Z,{style:{fontSize:"17px"},onClick:function(){ae(s.mails_id,i,s)}});if(s.task!=="done"||s.state==="FORWARDED"||s.state==="DESTROYED")return m?(0,e.jsx)(K.Z,{style:{width:"100%",textAlign:"left"},onClick:function(){s.task!=="done"&&_.default.info({description:(0,e.jsx)(l._H,{id:"start.select.error.mailinprocess",defaultMessage:"Sendungen die in der Bearbeitung sind, k\xF6nnen nicht ausgew\xE4hlt werden."}),message:""}),(s.state==="FORWARDED"||s.state==="DESTROYED")&&_.default.info({description:(0,e.jsx)(l._H,{id:"start.select.error.mailwrongstate",defaultMessage:"Sendungen die Verschickt oder Vernichtet wurden, k\xF6nnen nicht Selektiert werden."}),message:""})},size:"large",type:"ghost",children:(0,e.jsx)(_e.Z,{})}):(0,e.jsx)(_e.Z,{style:{fontSize:"17px"},onClick:function(){s.task!=="done"&&_.default.warning({description:(0,e.jsx)(l._H,{id:"start.select.error.mailinprocess",defaultMessage:"Sendungen die in der Bearbeitung sind, k\xF6nnen nicht ausgew\xE4hlt werden."}),message:""}),(s.state==="FORWARDED"||s.state==="DESTROYED")&&_.default.warning({description:(0,e.jsx)(l._H,{id:"start.select.error.mailwrongstate",defaultMessage:"Sendungen die Verschickt oder Vernichtet wurden, k\xF6nnen nicht Selektiert werden."}),message:""})}})}},G="";window.innerWidth>=1440?G="30vh":window.innerWidth>=1024&&window.innerWidth<1440?G="27vh":window.innerWidth>=768&&window.innerWidth<1024?G="23vh":window.innerWidth>=425&&window.innerWidth<768?G="25vh":window.innerWidth<325&&(G="20vh");var Me=function(s,i){var n,d,x;return(0,e.jsx)(V.Z,{hoverable:!0,bordered:!1,className:C.some(function(h){return h.mails_id===s.mails_id})?H().selected:H().notSelected,style:{width:G,display:"block",marginLeft:"auto",marginRight:"auto"},cover:(0,e.jsxs)(e.Fragment,{children:[he(s,i),(0,e.jsxs)(Oe.Z,{spinning:g,children:[(0,e.jsx)(Je.Z,{width:"100%",preview:{visible:!1},src:g||((n=p[i])===null||n===void 0?void 0:n.name)!=="".concat(s.mails_id,"-").concat(s.opened_pic_is_saved?s.state:"RECIEVED",".pdf")?Ne():(d=p[i])===null||d===void 0?void 0:d.image,onClick:function(){return Q(k,i,s)}}),!((x=k[i])!==null&&x!==void 0&&x.seen)&&(0,e.jsx)(q.Z.Ribbon,{text:"Neu",color:"green"})]})]}),actions:fe(s,i),children:(0,e.jsx)(V.Z.Meta,{title:s.sender,description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:s.subject}),(0,e.jsx)("p",{style:{textAlign:"end"},children:(0,e.jsx)(X.Z,{placement:"left",title:(0,e.jsx)(l._H,{id:"start.item.recieved",defaultMessage:"Eingegangen am"}),children:s.to_char})})]})})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:le||T?H().loadingOff:H().loadingOn,children:m?(0,e.jsx)(mt,{counter:y.mailCounterAll[r]}):(0,e.jsx)(xt,{counter:y.mailCounterAll[r]})}),(0,e.jsx)("div",{className:le||T?H().loadingOn:H().loadingOff,children:(0,e.jsx)(He.Z,{actionRef:ce,split:!0,loading:!1,metas:De,grid:m?et:void 0,renderItem:m?Me:void 0,request:(0,J.Z)(L().mark(function S(){var s,i,n,d,x,h,Ae,U=arguments;return L().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return s=U.length>0&&U[0]!==void 0?U[0]:{},i=U.length>1?U[1]:void 0,n=U.length>2?U[2]:void 0,d=c.startTime,x=c.endTime,h=c.search,N(!0),Fe(s),ie.next=8,(0,l.WY)(me.Q+"/api/mails/loadmails?id_company=".concat(v,"&state=").concat(o,"&startTime=").concat(d,"&endTime=").concat(x,"&search=").concat(h),{params:s});case 8:return Ae=ie.sent,N(!1),se(Ae.data),ie.abrupt("return",Ae);case 12:case"end":return ie.stop()}},S)})),rowKey:"mails_id",pagination:{showQuickJumper:!1,showSizeChanger:!1,pageSize:15}})}),(0,e.jsx)(Pe.Z,{destroyOnClose:!0,placement:window.innerWidth>800?"right":"bottom",width:"85%",height:"85%",onClose:function(){ee(!1),te({}),ne(null)},visible:oe,getContainer:!1,children:oe&&(0,e.jsx)(ut.Z,{item:we,setData:se,data:k,index:Re,setForceRender:F,forceRender:M})})]})},et={gutter:[32,32],xs:1,sm:1,md:2,lg:2,xl:3,xxl:4},mt=function(a){var r=a.counter,v="";return window.innerWidth>=1440?v="30vh":window.innerWidth>=1024&&window.innerWidth<1440?v="27vh":window.innerWidth>=768&&window.innerWidth<1024?v="23vh":window.innerWidth>=425&&window.innerWidth<768?v="25vh":window.innerWidth<325&&(v="20vh"),(0,e.jsx)(He.Z,{grid:et,renderItem:function(){return(0,e.jsx)(V.Z,{loading:!0,style:{boxShadow:"5px 8px 10px 5px rgba(0, 0, 0, 0.1)",width:v,display:"block",marginLeft:"auto",marginRight:"auto"},cover:(0,e.jsx)(Oe.Z,{spinning:!0,children:(0,e.jsx)(Je.Z,{preview:{visible:!1},src:Ne()})}),actions:[]})},dataSource:[0,0,0,0,0,0]})},xt=function(a){var r=a.counter;return(0,e.jsx)(ht.ZP,{type:"list",active:!0,toolbar:!1,pageHeader:!1,statistic:!1,list:6})},tt=$e.Z.Title,je=Ye.Z.TabPane,jt=function(a){var r=a.companyArr,v=a.selectCompany,o=a.selectedCompany,f=a.selectedCompanyCounter,T=a.activeTool,c=a.view,R=a.submitCounter,C=a.filter,m=a.setSelectionList,M=a.selectionList,F=a.forceRender,I=a.setForceRender,Y=a.forceReloadTable,y=a.setForceReloadTable,E=a.setSelectedCompanyCounter,Z=function(D,g,b,W){var B;return W>10&&W<99?B=10:W>99?B=15:B=5,{destroyInactiveTabPane:!0,key:D,tab:(0,e.jsx)(X.Z,{title:W>0&&(0,e.jsx)(l._H,{id:"start.tabheader.newMailAvailable",defaultMessage:"Neue Sendungen verf\xFCgbar"}),placement:"bottom",children:(0,e.jsx)(q.Z,{count:W,offset:[B,0],children:(0,e.jsxs)("div",{style:{fontSize:"20px"},children:[g,window.innerWidth>720&&(0,e.jsx)("span",{children:b})]})})})}},w=function(D,g){return(0,e.jsx)(V.Z,{bordered:!1,children:(0,e.jsx)(gt,{tabKey:D,id_company:o==null?void 0:o.id_company,state:g,activeTool:T,submitCounter:R,filter2:C,setSelectionList:m,selectionList:M,forceRender:F,setForceRender:I,view:c,setForceReloadTable:y,forceReloadTable:Y,setSelectedCompanyCounter:E,selectedCompanyCounter:f})})},p=function(){var D=(0,e.jsx)(O.Z,{children:r.map(function(g,b){return(0,e.jsx)(O.Z.Item,{value:g.name,onClick:function(){return v(g)},children:(0,e.jsx)(q.Z,{offset:[2,0],count:g.count,children:(0,e.jsx)("span",{style:{fontSize:18},children:g.name})})},g.id_company)})});if(r.length===1)return o.name;if(r.length>1&&r.length<=10)return(0,e.jsx)(Be.Z,{overlay:D,trigger:["click"],children:(0,e.jsxs)("a",{className:"ant-dropdown-link",style:{fontSize:18},onClick:function(b){return b.preventDefault()},children:[o.name," ",(0,e.jsx)(Ke.Z,{})]})});if(r.length>10)return(0,e.jsx)(ze.Z,{style:{width:200},defaultValue:o.name,showSearch:!0,size:"large",children:r.map(function(g,b){return(0,e.jsx)(ze.Z.Option,{value:g.name,onChange:function(){return v(g)},children:(0,e.jsx)(q.Z,{count:g.count,offset:[2,0],children:g.name})},g.id_company)})})},$={right:(0,e.jsx)(tt,{level:4,children:window.innerWidth>1e3&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Qe.Z,{})," ",p()]})})};return(0,e.jsxs)(V.Z,{bordered:!1,children:[window.innerWidth<1e3&&(0,e.jsxs)(tt,{level:5,children:[(0,e.jsx)(Qe.Z,{})," ",p()]}),(0,e.jsxs)(Ye.Z,{tabBarStyle:{backgroundColor:"white"},defaultActiveKey:"1",centered:!0,tabBarExtraContent:$,animated:window.innerWidth>720,children:[(0,e.jsx)(je,(0,P.Z)((0,P.Z)({},Z(0,(0,e.jsx)(ot.Z,{}),(0,e.jsx)(l._H,{id:"start.tabheader.recieved",defaultMessage:"Eingetroffen"}),f==null?void 0:f.mailCounterNotSeen[0])),{},{children:w(0,"RECIEVED")})),(0,e.jsx)(je,(0,P.Z)((0,P.Z)({},Z(1,(0,e.jsx)(Ge.Z,{}),(0,e.jsx)(l._H,{id:"start.tabheader.scanned",defaultMessage:"Gescannt"}),f==null?void 0:f.mailCounterNotSeen[1])),{},{children:w(1,"SCANNED")})),(0,e.jsx)(je,(0,P.Z)((0,P.Z)({},Z(2,(0,e.jsx)(Ue.Z,{}),(0,e.jsx)(l._H,{id:"start.tabheader.forwarded",defaultMessage:"Verschickt"}),f==null?void 0:f.mailCounterNotSeen[2])),{},{children:w(2,"FORWARDED")})),(0,e.jsx)(je,(0,P.Z)((0,P.Z)({},Z(3,(0,e.jsx)(Le.Z,{}),(0,e.jsx)(l._H,{id:"start.tabheader.destroyed",defaultMessage:"Vernichtet"}),f==null?void 0:f.mailCounterNotSeen[3])),{},{children:w(3,"DESTROYED")}))]})]})},nn=t(16318),Ct=t(44057),St=t(26139),yt=function(){return(0,e.jsx)(Ct.Z,{children:(0,e.jsx)("div",{style:{height:40,width:40,lineHeight:"40px",borderRadius:4,backgroundColor:"#1088e9",color:"#fff",textAlign:"center",fontSize:14},children:(0,e.jsx)(St.Z,{})})})},sn=t(3515),pt=t(44311),Zt=t(76570),wt=t(2223),Tt=t(34707),Rt=t(24406),Et=t(18401),Ce={width:40,borderRadius:4,background:"#394551",border:"none",color:"#fff",height:40,left:40,top:0},re={fontSize:"20px"},bt=function(a){var r=a.viewTable,v=a.changeViewMode,o=a.state,f=a.setActiveTool,T=a.activeTool,c=a.filter,R=function(m){f(m===T?"none":m)};return(0,e.jsx)(pt.Z,{offsetTop:250,style:{position:"absolute",top:0,left:-60},children:(0,e.jsxs)(ke.Z,{direction:"vertical",size:2,children:[(0,e.jsx)(q.Z,{dot:Object.keys(c).length!==0,offset:[40,0],children:(0,e.jsx)(X.Z,{placement:"right",title:(0,e.jsx)(l._H,{id:"start.tools.search",defaultMessage:"Filtern, Suchen"}),children:(0,e.jsx)(K.Z,{style:Ce,onClick:function(){return R("SEARCH")},icon:(0,e.jsx)(Zt.Z,{style:re})})})}),(0,e.jsx)(X.Z,{placement:"right",title:(0,e.jsx)(l._H,{id:"start.tools.statistic",defaultMessage:"Zahlen"}),children:(0,e.jsx)(K.Z,{style:Ce,onClick:function(){return R("CHART")},icon:(0,e.jsx)(wt.Z,{style:re})})}),window.innerWidth>600&&(0,e.jsx)(X.Z,{placement:"right",title:(0,e.jsx)(l._H,{id:"start.tools.changeView",defaultMessage:"Ansicht wechseln"}),children:(0,e.jsx)(K.Z,{style:Ce,onClick:function(){return v(!r)},icon:r?(0,e.jsx)(Tt.Z,{style:re}):(0,e.jsx)(Rt.Z,{style:re})})}),o==="FORWARDED"||o==="DESTROYED"?null:(0,e.jsx)(X.Z,{placement:"right",title:(0,e.jsx)(l._H,{id:"start.tools.select",defaultMessage:"Mehrere Selektieren"}),children:(0,e.jsx)(K.Z,{style:Ce,onClick:function(){return R("SELECT")},icon:(0,e.jsx)(Et.Z,{style:re})})})]})})},Ft=t(48518),Ve=t(54549),nt=function(a){var r=a.data,v=a.closeWindow,o=(0,l.YB)(),f=function(){var c=[];return c[0]={label:o.formatMessage({id:"start.tabheader.recieved",defaultMessage:"Eingetroffen"}),data:r[0]},c[1]={label:o.formatMessage({id:"start.tabheader.scanned",defaultMessage:"Gescannt"}),data:r[1]},c[2]={label:o.formatMessage({id:"start.tabheader.forwarded",defaultMessage:"Verschickt"}),data:r[2]},c[3]={label:o.formatMessage({id:"start.tabheader.destroyed",defaultMessage:"Vernichtet"}),data:r[3]},c};return(0,e.jsx)(V.Z,{bordered:!1,title:(0,e.jsx)(l._H,{id:"start.chart.cardtitle",defaultMessage:"Anzahl der Sendungen"}),extra:(0,e.jsx)(Ve.Z,{onClick:function(){return v()}}),children:(0,e.jsx)(Ft.yi,{forceFit:!0,height:340,radius:1,angleField:"data",colorField:"label",data:f(),legend:{visible:!1,position:"bottom-center"},label:{visible:!1},statistic:{totalLabel:o.formatMessage({id:"start.chart.totalLabel",defaultMessage:"Gesamt"})}})})},st=t(15196),Dt=t(5966),Mt=t(34540),at=function(a){var r=a.setFilter,v=a.closeWindow,o=a.filter,f=(0,l.YB)(),T=st.ZP.useForm(),c=(0,j.Z)(T,1),R=c[0];return(0,e.jsx)(V.Z,{bordered:!1,title:(0,e.jsx)(l._H,{id:"start.search.cardtitle",defaultMessage:"Suche"}),extra:(0,e.jsx)(Ve.Z,{onClick:function(){return v()}}),children:(0,e.jsxs)(st.ZP,{form:R,onFinish:function(){var C=(0,J.Z)(L().mark(function m(M){return L().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:r(M);case 1:case"end":return I.stop()}},m)}));return function(m){return C.apply(this,arguments)}}(),onReset:function(m){r({}),R==null||R.resetFields()},submitter:{searchConfig:{resetText:f.formatMessage({id:"start.search.resetbtn",defaultMessage:"zur\xFCcksetzen"}),submitText:f.formatMessage({id:"start.search.searchbtn",defaultMessage:"suchen"})}},initialValues:{search:o==null?void 0:o.search,date:[o==null?void 0:o.startTime,o==null?void 0:o.endTime]},children:[(0,e.jsx)(Dt.Z,{name:"search",label:(0,e.jsx)(l._H,{id:"start.search.input",defaultMessage:"Absender / Betreff"}),width:"100%"}),(0,e.jsx)(Mt.Z,{transform:function(m){return{startTime:m?m[0]:void 0,endTime:m?m[1]:void 0}},name:"date",label:(0,e.jsx)(l._H,{id:"start.search.date",defaultMessage:"Datum"}),width:"100%"})]})})},an=t(48736),At=t(27049),Wt=t(68628),it=function(a){var r=a.selectionList,v=a.setSelectionList,o=a.setForceReloadTable,f=a.closeWindow,T=(0,l.YB)(),c=function(E){var Z=r;Z.some(function(w){return w.mails_id===E})&&(Z=Z.filter(function(w){return w.mails_id!==E})),v(Z)},R=(0,u.useState)(!1),C=(0,j.Z)(R,2),m=C[0],M=C[1],F=function(){var y=(0,J.Z)(L().mark(function E(Z){var w,p;return L().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!(r.length<1)){A.next=2;break}return A.abrupt("return");case 2:for(M(!0),w=[],p=0;p<r.length;p++)w.push({mails_id:r[p].mails_id,state:r[p].state,task:r[p].task,id_company:r[p].id_company});return A.next=7,(0,l.WY)(me.Q+"/api/mails/changetaskarr",{method:"POST",data:{task:Z,mails:w}}).then(function(D){if(D===Z)_.default.success({message:"Erfolg!"}),v([]),o(!0);else throw Error}).catch(function(D){(0,Ie.S)(D,!0,"Fehler","Die Aufgabe konnte nicht eingereicht werden.")});case 7:M(!1);case 8:case"end":return A.stop()}},E)}));return function(Z){return y.apply(this,arguments)}}(),I=(0,e.jsxs)(O.Z,{children:[(0,e.jsx)(O.Z.Item,{onClick:function(){return v([])},children:(0,e.jsx)(l._H,{id:"start.select.dropdown.resetselection",defaultMessage:"Auswahl aufheben"})},"1"),(0,e.jsx)(O.Z.Divider,{}),(0,e.jsx)(O.Z.Item,{icon:(0,e.jsx)(Ge.Z,{}),onClick:function(){return F("SCANNED_REQ")},children:(0,e.jsx)(l._H,{id:"start.select.dropdown.scan",defaultMessage:"\xD6ffnen, Scannen"})},"2"),(0,e.jsx)(O.Z.Item,{icon:(0,e.jsx)(Ue.Z,{}),onClick:function(){return F("FORWARDED_REQ")},children:(0,e.jsx)(l._H,{id:"start.select.dropdown.forward",defaultMessage:"Verschicken"})},"3"),(0,e.jsx)(O.Z.Item,{icon:(0,e.jsx)(Le.Z,{}),onClick:function(){return F("DESTROYED_REQ")},children:(0,e.jsx)(l._H,{id:"start.select.dropdown.destroy",defaultMessage:"Vernichten"})},"3"),(0,e.jsx)(O.Z.Divider,{}),(0,e.jsx)(O.Z.Item,{onClick:function(){return F("READ")},children:(0,e.jsx)(l._H,{id:"start.select.dropdown.markasread",defaultMessage:"Als gelesen markieren"})},"1"),(0,e.jsx)(O.Z.Item,{onClick:function(){return F("UNREAD")},children:(0,e.jsx)(l._H,{id:"start.select.dropdown.markasunread",defaultMessage:"Als ungelesen markieren"})},"1")]}),Y=function(){_.default.info({description:T.formatMessage({id:"start.select.moreinfo.description",defaultMessage:"Indem Sie in den blauen K\xE4stchen ein H\xE4kchen setzen, k\xF6nnen Sie die verschiedenen Aktionen (verschicken,vernichten...) an mehreren Sendungen gleichzeitig anwenden."}),message:T.formatMessage({id:"start.select.moreinfo.message",defaultMessage:"Interagieren Sie mit mehreren Elementen."}),duration:null})};return(0,e.jsxs)(V.Z,{bordered:!1,title:(0,e.jsxs)(ke.Z,{children:[(0,e.jsx)(l._H,{id:"start.select.cardtitle",defaultMessage:"Mehrere Ausw\xE4hlen"}),(0,e.jsxs)("a",{onClick:Y,children:[(0,e.jsx)(Wt.Z,{})," ",(0,e.jsx)(l._H,{id:"start.select.moreinfo",defaultMessage:"mehr Info"})]})]}),loading:m,extra:(0,e.jsx)(Ve.Z,{onClick:function(){return f()}}),children:[(0,e.jsx)(At.Z,{children:(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsx)(Be.Z,{overlay:I,trigger:["click"],placement:"bottomRight",arrow:!0,children:(0,e.jsxs)("a",{className:"ant-dropdown-link",onClick:function(E){return E.preventDefault()},children:[r.length," ",(0,e.jsx)(l._H,{id:"start.select.counterselect",defaultMessage:"Sendungen ausgew\xE4hlt"})," ",(0,e.jsx)(Ke.Z,{})]})})})}),(0,e.jsx)("div",{style:r.length>15?{overflowY:"scroll",height:"80vh"}:void 0,children:(0,e.jsx)(He.Z,{rowKey:"mails_id",headerTitle:"",dataSource:r,showActions:"hover",metas:{title:{dataIndex:"title"},avatar:{dataIndex:"avatar",editable:!1},description:{dataIndex:"description"},subTitle:{},actions:{render:function(E,Z,w,p){return[(0,e.jsx)("a",{onClick:function(){return c(Z.mails_id)},children:(0,e.jsx)(Le.Z,{})},"link")]}}}})})]})},Lt=t(22172),kt=t(3394),Ot=ge.Z.Content,Ht=ge.Z.Sider,It=function(){var a=(0,u.useState)(!1),r=(0,j.Z)(a,2),v=r[0],o=r[1],f=(0,u.useState)("none"),T=(0,j.Z)(f,2),c=T[0],R=T[1],C=(0,u.useState)(!1),m=(0,j.Z)(C,2),M=m[0],F=m[1],I=(0,u.useState)(!1),Y=(0,j.Z)(I,2),y=Y[0],E=Y[1],Z=(0,u.useState)(!0),w=(0,j.Z)(Z,2),p=w[0],$=w[1],A=(0,u.useState)(!0),D=(0,j.Z)(A,2),g=D[0],b=D[1],W=function(){b(!0)},B=(0,u.useState)({name:"no_company_found",id_company:0}),le=(0,j.Z)(B,2),N=le[0],Se=le[1],ye=(0,u.useState)({}),oe=(0,j.Z)(ye,2),ee=oe[0],pe=oe[1],Ze=(0,u.useState)([]),we=(0,j.Z)(Ze,2),te=we[0],de=we[1],Te=(0,u.useState)({id_company:0,name:"",mailCounterAll:[0,0,0,0],mailCounterNotSeen:[0,0,0,0],mailCounterReady:0,mailCounterInProgress:0}),Re=(0,j.Z)(Te,2),ne=Re[0],Ee=Re[1],be=(0,u.useState)(!1),k=(0,j.Z)(be,2),se=k[0],Fe=k[1],ce=(0,u.useState)([{name:"no_company_found",id_company:0}]),ue=(0,j.Z)(ce,2),ae=ue[0],Q=ue[1];(0,u.useEffect)(function(){b(c==="none")},[c]),(0,u.useEffect)(function(){g||window.scrollTo({top:0,behavior:"smooth"})},[g]),(0,u.useEffect)(function(){Me()},[N]),(0,u.useEffect)(function(){function S(){return s.apply(this,arguments)}function s(){return s=(0,J.Z)(L().mark(function i(){var n,d;return L().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o(!0),h.next=3,Lt.h.getState().auth;case 3:n=h.sent,d=n.companies,d&&(Se(d[0]||[]),Q(d),Me()),o(!1);case 7:case"end":return h.stop()}},i)})),s.apply(this,arguments)}S()},[]);var fe=(0,u.useState)("RECIEVED"),De=(0,j.Z)(fe,2),he=De[0],G=De[1],Me=function(){var S=(0,J.Z)(L().mark(function s(){return L().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(N!=null&&N.id_company){n.next=2;break}return n.abrupt("return");case 2:return Fe(!0),n.next=5,(0,l.WY)(me.Q+"/api/mails/getall",{method:"POST",data:{id_company:N.id_company,name:N.name}}).then(function(d){if(d.mailCounterNotSeen[0]>=0)Ee(d);else throw Error}).catch(function(d){(0,Ie.S)(d,!1,"","")});case 5:Fe(!1);case 6:case"end":return n.stop()}},s)}));return function(){return S.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:v?(0,kt.g)():(0,e.jsxs)(ge.Z,{children:[window.innerWidth>1400?(0,e.jsx)(Ht,{defaultCollapsed:!0,collapsible:!0,trigger:null,style:{left:-500},collapsedWidth:0,width:410,collapsed:g,children:(0,e.jsxs)(V.Z,{style:{left:505,width:380},bordered:!1,children:[c==="CHART"&&(0,e.jsx)(nt,{data:ne.mailCounterAll,closeWindow:W}),c==="SEARCH"&&(0,e.jsx)(at,{setFilter:pe,closeWindow:W,filter:ee}),c==="SELECT"&&(0,e.jsx)(it,{selectionList:te,setSelectionList:de,setForceReloadTable:E,closeWindow:W})]})}):(0,e.jsxs)(Pe.Z,{destroyOnClose:!0,placement:"bottom",mask:!1,height:"40%",onClose:function(){b(!0)},visible:!g,getContainer:!1,children:[c==="CHART"&&(0,e.jsx)(nt,{data:ne.mailCounterAll,setCollapsed:b}),c==="SEARCH"&&(0,e.jsx)(at,{setFilter:pe,setCollapsed:b}),c==="SELECT"&&(0,e.jsx)(it,{selectionList:te,setSelectionList:de,setForceReloadTable:E,setCollapsed:b})]}),(0,e.jsx)(ge.Z,{children:(0,e.jsx)(Ot,{children:N.length!==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(yt,{}),(0,e.jsx)(bt,{viewTable:p,changeViewMode:$,state:he,setActiveTool:R,activeTool:c,filter:ee}),(0,e.jsx)(jt,{companyArr:ae,selectCompany:Se,selectedCompany:N,selectedCompanyCounter:ne,setSelectedCompanyCounter:Ee,view:p,activeTool:c,submitCounter:se,filter:ee,setSelectionList:de,selectionList:te,forceRender:M,setForceRender:F,setForceReloadTable:E,forceReloadTable:y})]}):(0,e.jsx)(rt.ZP,{status:"404",title:(0,e.jsx)(l._H,{id:"start.companynotexists.title",defaultMessage:"Keine Sendungen vorhanden."}),subTitle:(0,e.jsx)(l._H,{id:"start.companynotexists.subTitle",defaultMessage:"Dieser Account ist zur Zeit mit keiner Firma verbunden."})})})})]})})}},37184:function(ve,We,t){ve.exports=t.p+"static/loading_img.e8571335.jpg"}}]);
