(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[756],{18547:function($,T,t){"use strict";t.d(T,{Z:function(){return P}});var x=t(28991),S=t(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M508 704c79.5 0 144-64.5 144-144s-64.5-144-144-144-144 64.5-144 144 64.5 144 144 144zm0-224c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}},{tag:"path",attrs:{d:"M832 256h-28.1l-35.7-120.9c-4-13.7-16.5-23.1-30.7-23.1h-451c-14.3 0-26.8 9.4-30.7 23.1L220.1 256H192c-17.7 0-32 14.3-32 32v28c0 4.4 3.6 8 8 8h45.8l47.7 558.7a32 32 0 0031.9 29.3h429.2a32 32 0 0031.9-29.3L802.2 324H856c4.4 0 8-3.6 8-8v-28c0-17.7-14.3-32-32-32zm-518.6-76h397.2l22.4 76H291l22.4-76zm376.2 664H326.4L282 324h451.9l-44.3 520z"}}]},name:"rest",theme:"outlined"},j=Z,M=t(27029),y=function(c,f){return S.createElement(M.Z,(0,x.Z)((0,x.Z)({},c),{},{ref:f,icon:j}))};y.displayName="RestOutlined";var P=S.forwardRef(y)},63434:function($,T,t){"use strict";var x=t(63185),S=t(9676),Z=t(67294),j=t(20843),M=t(22270),y=t(64893),P=["options","fieldProps","proFieldProps","valueEnum"];function p(){return p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function c(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?c(Object(n),!0).forEach(function(r){d(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function s(e,a){if(e==null)return{};var n=o(e,a),r,u;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(u=0;u<v.length;u++)r=v[u],!(a.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function o(e,a){if(e==null)return{};var n={},r=Object.keys(e),u,v;for(v=0;v<r.length;v++)u=r[v],!(a.indexOf(u)>=0)&&(n[u]=e[u]);return n}var m=Z.forwardRef(function(e,a){var n=e.options,r=e.fieldProps,u=e.proFieldProps,v=e.valueEnum,I=s(e,P);return Z.createElement(j.Z,p({ref:a,valueType:"checkbox",mode:"edit",valueEnum:(0,M.h)(v,void 0),fieldProps:f({options:n},r),proFieldProps:u},I))}),h=Z.forwardRef(function(e,a){var n=e.fieldProps,r=e.children;return Z.createElement(S.Z,p({ref:a},n),r)}),O=(0,y.Z)(h,{valuePropName:"checked"}),g=O;g.Group=m,T.Z=g},64317:function($,T,t){"use strict";var x=t(67294),S=t(20843),Z=t(22270),j=t(66758),M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],y=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"];function P(){return P=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function p(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?p(Object(n),!0).forEach(function(r){f(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function d(e,a){if(e==null)return{};var n=s(e,a),r,u;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(u=0;u<v.length;u++)r=v[u],!(a.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function s(e,a){if(e==null)return{};var n={},r=Object.keys(e),u,v;for(v=0;v<r.length;v++)u=r[v],!(a.indexOf(u)>=0)&&(n[u]=e[u]);return n}var o=x.forwardRef(function(e,a){var n=e.fieldProps,r=e.children,u=e.params,v=e.proFieldProps,I=e.mode,N=e.valueEnum,Y=e.request,i=e.showSearch,H=e.options,Q=d(e,M),G=(0,x.useContext)(j.Z);return x.createElement(S.Z,P({mode:"edit",valueEnum:(0,Z.h)(N),request:Y,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:c({options:H,mode:I,showSearch:i,getPopupContainer:G.getPopupContainer},n),ref:a,proFieldProps:v},Q),r)}),m=x.forwardRef(function(e,a){var n=e.fieldProps,r=e.children,u=e.params,v=e.proFieldProps,I=e.mode,N=e.valueEnum,Y=e.request,i=e.options,H=d(e,y),Q=c({options:i,mode:I||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label",filterOption:!1},n),G=(0,x.useContext)(j.Z);return x.createElement(S.Z,P({mode:"edit",valueEnum:(0,Z.h)(N),request:Y,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:c({getPopupContainer:G.getPopupContainer},Q),ref:a,proFieldProps:v},H),r)}),h=o,O=m,g=h;g.SearchSelect=O,g.displayName="ProFormComponent",T.Z=g},90672:function($,T,t){"use strict";var x=t(67294),S=t(20843),Z=["fieldProps","proFieldProps"];function j(){return j=Object.assign||function(p){for(var c=1;c<arguments.length;c++){var f=arguments[c];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(p[d]=f[d])}return p},j.apply(this,arguments)}function M(p,c){if(p==null)return{};var f=y(p,c),d,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(p);for(s=0;s<o.length;s++)d=o[s],!(c.indexOf(d)>=0)&&(!Object.prototype.propertyIsEnumerable.call(p,d)||(f[d]=p[d]))}return f}function y(p,c){if(p==null)return{};var f={},d=Object.keys(p),s,o;for(o=0;o<d.length;o++)s=d[o],!(c.indexOf(s)>=0)&&(f[s]=p[s]);return f}var P=function(c,f){var d=c.fieldProps,s=c.proFieldProps,o=M(c,Z);return x.createElement(S.Z,j({ref:f,mode:"edit",valueType:"textarea",fieldProps:d,proFieldProps:s},o))};T.Z=x.forwardRef(P)},5966:function($,T,t){"use strict";var x=t(67294),S=t(20843),Z=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"];function M(){return M=Object.assign||function(s){for(var o=1;o<arguments.length;o++){var m=arguments[o];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(s[h]=m[h])}return s},M.apply(this,arguments)}function y(s,o){if(s==null)return{};var m=P(s,o),h,O;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(s);for(O=0;O<g.length;O++)h=g[O],!(o.indexOf(h)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,h)||(m[h]=s[h]))}return m}function P(s,o){if(s==null)return{};var m={},h=Object.keys(s),O,g;for(g=0;g<h.length;g++)O=h[g],!(o.indexOf(O)>=0)&&(m[O]=s[O]);return m}var p="text",c=function(o){var m=o.fieldProps,h=o.proFieldProps,O=y(o,Z);return x.createElement(S.Z,M({mode:"edit",valueType:p,fieldProps:m,filedConfig:{valueType:p},proFieldProps:h},O))},f=function(o){var m=o.fieldProps,h=o.proFieldProps,O=y(o,j);return x.createElement(S.Z,M({mode:"edit",valueType:"password",fieldProps:m,proFieldProps:h,filedConfig:{valueType:p}},O))},d=c;d.Password=f,d.displayName="ProFormComponent",T.Z=d},750:function($,T,t){"use strict";t.r(T),t.d(T,{default:function(){return Oe}});var x=t(62350),S=t(75443),Z=t(22385),j=t(69713),M=t(57663),y=t(71577),P=t(11849),p=t(34792),c=t(48086),f=t(3182),d=t(2824),s=t(94043),o=t.n(s),m=t(67294),h=t(18547),O=t(64302),g=t(43581),e=t(25753),a=t(8060),n=t(402),r=t(59289),u=t(49101),v=t(37476),I=t(5966),N=t(90672),Y=t(63434),i=t(85893),H=r.Z.Paragraph,Q=function(z){var l=z.updateCreateUser,J=z.submitting;return(0,i.jsxs)(v.Z,{title:"Benutzer erstellen",modalProps:{forceRender:!0,destroyOnClose:!0},trigger:(0,i.jsx)(y.Z,{type:"primary",icon:(0,i.jsx)(u.Z,{}),children:"Benutzer hinzuf\xFCgen"}),initialValues:{state:!0},onFinish:function(){var K=(0,f.Z)(o().mark(function L(U){return o().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,l((0,P.Z)((0,P.Z)({},U),{},{mode:"create"}));case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},L)}));return function(L){return K.apply(this,arguments)}}(),hideRequiredMark:!0,submitter:{render:function(L,U){return[(0,i.jsx)(y.Z,{type:"primary",loading:J,onClick:function(){var b;return(b=L.form)===null||b===void 0?void 0:b.submit()},children:"Speichern"})]}},children:[(0,i.jsx)(H,{children:(0,i.jsx)("blockquote",{children:"Info: Mit dem Erstellen des Accounts, wird automatisch eine Best\xE4tigungs Email an die Neue Email versandt."})}),(0,i.jsx)(I.Z,{name:"email",label:"Email",rules:[{type:"email",required:!0}]}),(0,i.jsx)(I.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,i.jsx)(N.Z,{name:"notes",label:"Notizen",tooltip:"Notizen sind f\xFCr interne Zwecke gedacht. Der Kunde kann diese nicht sehen."}),(0,i.jsx)(Y.Z,{name:"state",label:"Account Status",tooltip:"Wenn der Status deaktiviert ist, kann der User sich nicht in sein Account einloggen."})]})},G=t(8212),ne=t(15196),_=t(64317),he=t(30381),ae=t.n(he),ge=r.Z.Paragraph,Pe=function(z){var l=z.row,J=z.updateCreateCompany,K=z.submitting;return(0,i.jsxs)(v.Z,{title:"Bearbeiten",modalProps:{forceRender:!0,destroyOnClose:!0},trigger:(0,i.jsx)(j.Z,{placement:"left",title:"bearbeiten",children:(0,i.jsx)(y.Z,{type:"link",icon:(0,i.jsx)(G.Z,{})})}),initialValues:{email:l==null?void 0:l.email,name:l==null?void 0:l.name,notes:l==null?void 0:l.notes,state:l==null?void 0:l.state,isadmin:l!=null&&l.isadmin?"Admin":"User",registered:ae()(l==null?void 0:l.registered).format("MM/DD/YYYY"),last_login:ae()(l==null?void 0:l.last_login).format("MM/DD/YYYY HH:mm:ss")},onFinish:function(){var L=(0,f.Z)(o().mark(function U(V){return o().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,J((0,P.Z)((0,P.Z)({},V),{},{mode:"update",user_id:l==null?void 0:l.user_id}));case 2:return w.abrupt("return",w.sent);case 3:case"end":return w.stop()}},U)}));return function(U){return L.apply(this,arguments)}}(),hideRequiredMark:!0,submitter:{render:function(U,V){return[(0,i.jsx)(y.Z,{type:"primary",loading:K,onClick:function(){var w;return(w=U.form)===null||w===void 0?void 0:w.submit()},children:"Speichern"})]}},children:[(0,i.jsx)(ne.UW,{label:"User ID: ".concat(l==null?void 0:l.user_id)}),(0,i.jsx)(ge,{children:(0,i.jsx)("blockquote",{children:"Info: Sobald die Email ge\xE4ndert wird, wird automatisch eine Best\xE4tigungs Email an die Neue Email versandt. Das Passwort wird ge\xE4ndert. Somit kann der Nutzer sich nicht mehr in sein Account einloggen, bis er diesen best\xE4tigt hat."})}),(0,i.jsx)(I.Z,{name:"email",label:"Email",rules:[{type:"email",required:!0}]}),(0,i.jsx)(I.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,i.jsx)(N.Z,{name:"notes",label:"Notizen",tooltip:"Notizen sind f\xFCr interne Zwecke gedacht. Der Kunde kann diese nicht sehen."}),(0,i.jsx)(Y.Z,{name:"state",label:"Account Status",tooltip:"Wenn der Status deaktiviert ist, kann der User sich nicht in sein Account einloggen."}),(0,i.jsxs)(ne.UW,{label:"weitere Infos",children:[(0,i.jsx)(_.Z,{readonly:!0,name:"isadmin",label:"Account Typ"}),(0,i.jsx)(_.Z,{readonly:!0,name:"last_login",label:"Letzter Login"}),(0,i.jsx)(_.Z,{readonly:!0,name:"registered",label:"Registriert am"})]})]})},ee=t(17753),Oe=function(){var z=(0,g.md)(),l=(0,m.useRef)(),J=(0,m.useState)(""),K=(0,d.Z)(J,2),L=K[0],U=K[1],V=(0,m.useState)(!1),b=(0,d.Z)(V,2),w=b[0],oe=b[1],ye=(0,m.useState)([]),se=(0,d.Z)(ye,2),le=se[0],ue=se[1],xe=(0,m.useState)([]),de=(0,d.Z)(xe,2),ce=de[0],pe=de[1],Ee=(0,m.useState)(!1),fe=(0,d.Z)(Ee,2),X=fe[0],q=fe[1],me=function(){l.current.reload()},je=(0,m.useState)({last_login:{fixed:"left",show:!1},registered:{fixed:"left",show:!1},verified:{fixed:"left",show:!1},state:{fixed:"left",show:!1}}),ve=(0,d.Z)(je,2),be=ve[0],Ce=ve[1],te=function(){var R=(0,f.Z)(o().mark(function F(E,D){var C,B;return o().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return E.mode==="delete"?(C=ce,C[D]=!0,pe(C),q(!X)):oe(!0),k.next=3,(0,g.WY)(ee.Q+"/api/admin/createuser",{method:"POST",data:E}).then(function(A){if(A==="ok")return c.default.success("Erfolg!"),me(),!0;A==="double"?c.default.warning("User mit dieser Email wurde schon angelegt."):c.default.error("Fehler beim Upload.")}).catch(function(A){(0,e.S)(A,!0,"Fehler","User konnte nicht erstellt bzw editiert werden.")});case 3:if(B=k.sent,E.mode==="delete"?(pe([]),q(!X)):oe(!1),!B){k.next=7;break}return k.abrupt("return",!0);case 7:case"end":return k.stop()}},F)}));return function(E,D){return R.apply(this,arguments)}}(),Se=function(){var R=(0,f.Z)(o().mark(function F(E,D,C,B){var W;return o().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return W=le,W[B]=!0,ue(W),q(!X),A.next=6,(0,g.WY)(ee.Q+"/api/admin/sendverify",{method:"POST",data:{email:E,user_id:D,name:C}}).then(function(re){if(re==="ok"){c.default.success("Verschickt!");return}throw Error}).catch(function(re){(0,e.S)(re,!0,"Fehler","Die Email konnte nicht geschickt werden.")});case 6:ue([]),q(!X);case 8:case"end":return A.stop()}},F)}));return function(E,D,C,B){return R.apply(this,arguments)}}(),Ze=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email",width:"10%"},{title:"User ID",dataIndex:"user_id",key:"user_id"},{title:"Firmen",dataIndex:"companies",render:function(F,E){return(0,i.jsx)(i.Fragment,{children:E.companies.map(function(D){return(0,i.jsxs)(i.Fragment,{children:[D,(0,i.jsx)("br",{})]})})})}},{title:"Notizen",dataIndex:"notes",key:"notes"},{title:"Letzter Login",dataIndex:"last_login",key:"last_login",valueType:"dateTime"},{title:"Registriert am",dataIndex:"registered",key:"registered",valueType:"date"},{title:"Status",dataIndex:"state",key:"state",align:"center",valueEnum:{true:{text:"aktiv",status:"success"},false:{text:"inaktiv",status:"error"}}},{title:"Verifiziert",dataIndex:"verified",key:"verified",align:"center",valueEnum:{true:{text:"verifiziert",status:"success"},false:{text:"nicht verifiziert",status:"error"}}},{title:"Aktion",key:"delete",align:"center",render:function(F,E,D,C){return[(0,i.jsx)(Pe,{row:E,submitting:w,updateCreateCompany:te}),(0,i.jsx)(S.Z,{placement:"topRight",title:"Bist du dir sicher ?",onConfirm:function(){return te((0,P.Z)((0,P.Z)({},E),{},{mode:"delete"}),D)},okText:"Ja",cancelText:"Abbrechen",children:(0,i.jsx)(j.Z,{placement:"left",title:"L\xF6schen",children:(0,i.jsx)(y.Z,{type:"link",icon:(0,i.jsx)(h.Z,{}),loading:ce[D]})})}),(0,i.jsx)(j.Z,{placement:"left",title:"Verifizierungs Email verschicken",children:(0,i.jsx)(y.Z,{type:"link",loading:le[D],icon:(0,i.jsx)(O.Z,{}),onClick:function(){return Se(E.email,E.user_id,E.name,D)}})})]}}];return(0,i.jsx)(g.Nv,{accessible:z.canAdmin,fallback:function(){return g.m8.push("/exception/403")},children:(0,i.jsx)(a.ZP,{actionRef:l,onColumnsStateChange:function(F){return Ce(F)},columns:Ze,request:(0,f.Z)(o().mark(function R(){var F,E,D,C=arguments;return o().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return F=C.length>0&&C[0]!==void 0?C[0]:{},E=C.length>1?C[1]:void 0,D=C.length>2?C[2]:void 0,W.abrupt("return",(0,g.WY)(ee.Q+"/api/admin/getalluserdata?search=".concat(L),{params:F}));case 4:case"end":return W.stop()}},R)})),rowKey:"user_id",columnsStateMap:be,pagination:{showQuickJumper:!1,showSizeChanger:!0},toolbar:{search:{onSearch:function(F){U(F),me()},placeholder:"Name / Email"},actions:[(0,i.jsx)(Q,{updateCreateUser:te,submitting:w})]},dateFormatter:"string",headerTitle:"Benutzer",search:!1})})}}}]);
